!function(t){function e(o){if(a[o])return a[o].exports;var n=a[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var a={};e.m=t,e.c=a,e.d=function(t,a,o){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,a){a(1),t.exports=a(2)},function(t,e,a){"use strict";function o(t){var e=t.endpoint,a=t.query,o=e+"?"+a+"=%QUERY%";return t.parameters.forEach(function(t){o+="&"+t.key+"="+t.value}),new Bloodhound({remote:{url:o,wildcard:"%QUERY%"},datumTokenizer:Bloodhound.tokenizers.whitespace(a),queryTokenizer:Bloodhound.tokenizers.whitespace})}function n(t,e,a){var o=a.displayKey,n=a.name,r=a.suggestion;return $(e).typeahead({hint:!1,highlight:!0,minLength:1},{source:t.ttAdapter(),name:n,displayKey:o,templates:{empty:['<div class="list-group search-results-dropdown"><div class="list-group-item">Nothing found.</div></div>'],header:['<div class="list-group search-results-dropdown">'],suggestion:r}})}function r(){var t=$("#book_input").val()&&($("#attach_author_last_name").val()&&$("#attach_author_first_name").val()||$("#search_author_id").val());$("#attach_new_book_submit").attr("disabled",!t)}Object.defineProperty(e,"__esModule",{value:!0});var i={endpoint:"/api/books/",query:"title",parameters:[{key:"book_list_slug",value:$("#search_book_list_slug").val()}],displayKey:"title",name:"booksList",suggestion:function(t){return'<div data-slug="'+t.slug+'" class="list-group-item">'+t.title+" - "+t.author_first_name+" "+t.author_last_name+"</a>"}},u={endpoint:"/api/authors/",query:"full_name",parameters:[],displayKey:"full_name",name:"authorsList",suggestion:function(t){return'<div class="list-group-item">'+t.full_name+"</a>"}},s=o(i),l=o(u);$("a.detach-book").click(function(){$('#confirmDelete input[name="id"]').val($(this).data("id"))}),$("#book_search_input").on("keyup",function(){$("#attach_book_submit").attr("disabled",!0),$("#search_book_slug").val("")}),n(s,"#book_search_input",i).on("typeahead:selected",function(t,e){$("#attach_book_submit").attr("disabled",!1),$("#search_book_slug").val(e.slug)}),$("#author_search_input").on("keyup",function(){$("#attach_new_book_submit").attr("disabled",!0),$("#search_author_id").val("")}),n(l,"#author_search_input",u).on("typeahead:selected",function(t,e){$("#search_author_id").val(e.id),r()}),$("#full_author_collapse").on("shown.bs.collapse",function(){$("#author_search_input").typeahead("destroy"),$("#author_search_input").hide(500).siblings("label").hide(500),$("#add_new_author_btn").text("Actually, that author exists"),$("#search_author_id").val("")}).on("hidden.bs.collapse",function(){$("#add_new_author_btn").text("This author doesn't exist?"),$("#author_search_input").show(500).siblings("label").show(500),r(),n(l,"#author_search_input",u).on("typeahead:selected",function(t,e){$("#search_author_id").val(e.id),r()})}),$("#attach_author_last_name").on("keyup",function(){r(),$("#search_author_id").val("")}),$("#attach_author_first_name").on("keyup",function(){r(),$("#search_author_id").val("")}),$("#book_input").on("keyup",function(){r()})},function(t,e){}]);